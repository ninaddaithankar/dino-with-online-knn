#!/bin/bash

#SBATCH --account=beex-dtai-gh
#SBATCH --partition=ghx4
### NODE/CPU/MEM/GPU  ###
#SBATCH --mem-bind=verbose,local
#SBATCH --gpu-bind=verbose,closest
#SBATCH --mem=0
#SBATCH --cpus-per-gpu=72

### ADDITIONAL RUN INFO ###
#SBATCH --array=1-2
#SBATCH --time=36:00:00
#SBATCH --nodes=1
#SBATCH --gpus-per-node=4

### LOG INFO ###
#SBATCH --job-name=FULL_INI1K_ONLY_SSV2_dino_recipe_
#SBATCH --output=logs/slurm/ini1k_eval/FULL_INI1K_ONLY_SSV2_dino_recipe_%A-%a%A-%a.log
export RUN_NAME="FULL_INI1K_ONLY_SSV2_dino_recipe_"

mkdir -p logs/slurm/ini1k_eval/
module purge
ulimit -n 65535

torchrun --nproc_per_node=2 eval_knn.py \
--run_name ${RUN_NAME} \
--arch vit_base \
--batch_size_per_gpu 128 \
--train_samples_per_class -1 \
--val_samples_per_class -1 \
--pretrained_weights "/work/hdd/bcsi/ndaithankar/tdv/logs/checkpoints/ONLY_SSV2_scratch_ssv2_2025-10-14_23-41-04_/last.ckpt"\